<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flipdot Matrix</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #e67e22;
            overflow: hidden;
            font-family: 'Crimson Text', serif;
            cursor: none;
        }
        
        .matrix-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: grid;
            gap: 4px;
            padding: 20px;
            grid-template-columns: repeat(auto-fit, minmax(12px, 1fr));
            grid-template-rows: repeat(auto-fit, minmax(12px, 1fr));
            background: #e67e22;
        }
        
        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e67e22;
            transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }
        
        .dot.active {
            background: white;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.6);
            transform: scale(1.1);
        }
        
        .dot::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 60%;
            height: 60%;
            background: inherit;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: inherit;
        }
        
        @keyframes flip {
            0% { transform: rotateY(0deg) scale(1); }
            50% { transform: rotateY(90deg) scale(0.8); }
            100% { transform: rotateY(0deg) scale(1); }
        }
        
        .dot.flipping {
            animation: flip 0.4s ease-in-out;
        }
    </style>
</head>
<body>
    <div class="matrix-container" id="matrix"></div>

    <script>
        class FlipDotMatrix {
            constructor() {
                this.container = document.getElementById('matrix');
                this.dots = [];
                this.cols = 0;
                this.rows = 0;
                this.currentPattern = 0;
                this.patterns = [
                    this.wavePattern.bind(this),
                    this.spiralPattern.bind(this),
                    this.randomPattern.bind(this),
                    this.concentricPattern.bind(this),
                    this.diagonalPattern.bind(this),
                    this.pulsePattern.bind(this),
                    this.checkerPattern.bind(this),
                    this.ripplePattern.bind(this)
                ];
                
                this.init();
                this.startAnimation();
            }
            
            init() {
                this.calculateGrid();
                this.createDots();
                window.addEventListener('resize', () => {
                    this.init();
                });
            }
            
            calculateGrid() {
                const containerWidth = window.innerWidth - 40;
                const containerHeight = window.innerHeight - 40;
                this.cols = Math.floor(containerWidth / 16);
                this.rows = Math.floor(containerHeight / 16);
                
                this.container.style.gridTemplateColumns = `repeat(${this.cols}, 12px)`;
                this.container.style.gridTemplateRows = `repeat(${this.rows}, 12px)`;
            }
            
            createDots() {
                this.container.innerHTML = '';
                this.dots = [];
                
                for (let i = 0; i < this.rows * this.cols; i++) {
                    const dot = document.createElement('div');
                    dot.className = 'dot';
                    this.container.appendChild(dot);
                    this.dots.push(dot);
                }
            }
            
            getDotIndex(row, col) {
                return row * this.cols + col;
            }
            
            setDot(row, col, active, delay = 0) {
                if (row < 0 || row >= this.rows || col < 0 || col >= this.cols) return;
                
                const index = this.getDotIndex(row, col);
                const dot = this.dots[index];
                
                setTimeout(() => {
                    dot.classList.add('flipping');
                    setTimeout(() => {
                        if (active) {
                            dot.classList.add('active');
                        } else {
                            dot.classList.remove('active');
                        }
                        dot.classList.remove('flipping');
                    }, 200);
                }, delay);
            }
            
            clearMatrix() {
                this.dots.forEach(dot => {
                    dot.classList.remove('active');
                });
            }
            
            wavePattern() {
                this.clearMatrix();
                let time = 0;
                
                for (let col = 0; col < this.cols; col++) {
                    for (let row = 0; row < this.rows; row++) {
                        const wave = Math.sin((col * 0.2) + (time * 0.1)) * 0.5 + 0.5;
                        const active = row < Math.floor(wave * this.rows);
                        this.setDot(row, col, active, col * 50);
                    }
                }
            }
            
            spiralPattern() {
                this.clearMatrix();
                const centerX = Math.floor(this.cols / 2);
                const centerY = Math.floor(this.rows / 2);
                let delay = 0;
                
                for (let radius = 1; radius < Math.max(this.cols, this.rows); radius += 3) {
                    for (let angle = 0; angle < 360; angle += 10) {
                        const x = centerX + Math.floor(radius * Math.cos(angle * Math.PI / 180));
                        const y = centerY + Math.floor(radius * Math.sin(angle * Math.PI / 180));
                        this.setDot(y, x, true, delay);
                        delay += 20;
                    }
                }
            }
            
            randomPattern() {
                this.clearMatrix();
                const numDots = Math.floor(this.dots.length * 0.3);
                
                for (let i = 0; i < numDots; i++) {
                    const row = Math.floor(Math.random() * this.rows);
                    const col = Math.floor(Math.random() * this.cols);
                    this.setDot(row, col, true, Math.random() * 2000);
                }
            }
            
            concentricPattern() {
                this.clearMatrix();
                const centerX = Math.floor(this.cols / 2);
                const centerY = Math.floor(this.rows / 2);
                
                for (let row = 0; row < this.rows; row++) {
                    for (let col = 0; col < this.cols; col++) {
                        const distance = Math.sqrt(Math.pow(col - centerX, 2) + Math.pow(row - centerY, 2));
                        const ring = Math.floor(distance / 5) % 3;
                        this.setDot(row, col, ring === 0, distance * 30);
                    }
                }
            }
            
            diagonalPattern() {
                this.clearMatrix();
                
                for (let offset = 0; offset < this.rows + this.cols; offset++) {
                    for (let row = 0; row < this.rows; row++) {
                        const col = offset - row;
                        if (col >= 0 && col < this.cols && (offset % 4 === 0 || offset % 4 === 1)) {
                            this.setDot(row, col, true, offset * 100);
                        }
                    }
                }
            }
            
            pulsePattern() {
                this.clearMatrix();
                const centerX = Math.floor(this.cols / 2);
                const centerY = Math.floor(this.rows / 2);
                
                for (let pulse = 0; pulse < 5; pulse++) {
                    const radius = pulse * 8;
                    for (let row = 0; row < this.rows; row++) {
                        for (let col = 0; col < this.cols; col++) {
                            const distance = Math.sqrt(Math.pow(col - centerX, 2) + Math.pow(row - centerY, 2));
                            if (Math.abs(distance - radius) < 2) {
                                this.setDot(row, col, true, pulse * 500);
                            }
                        }
                    }
                }
            }
            
            checkerPattern() {
                this.clearMatrix();
                
                for (let row = 0; row < this.rows; row++) {
                    for (let col = 0; col < this.cols; col++) {
                        const active = (row + col) % 4 < 2;
                        this.setDot(row, col, active, (row + col) * 50);
                    }
                }
            }
            
            ripplePattern() {
                this.clearMatrix();
                const points = [
                    [Math.floor(this.cols * 0.3), Math.floor(this.rows * 0.3)],
                    [Math.floor(this.cols * 0.7), Math.floor(this.rows * 0.7)],
                    [Math.floor(this.cols * 0.5), Math.floor(this.rows * 0.1)]
                ];
                
                for (let row = 0; row < this.rows; row++) {
                    for (let col = 0; col < this.cols; col++) {
                        let minDistance = Infinity;
                        points.forEach(point => {
                            const distance = Math.sqrt(Math.pow(col - point[0], 2) + Math.pow(row - point[1], 2));
                            minDistance = Math.min(minDistance, distance);
                        });
                        
                        const ripple = Math.sin(minDistance * 0.5) > 0.5;
                        this.setDot(row, col, ripple, minDistance * 30);
                    }
                }
            }
            
            nextPattern() {
                this.patterns[this.currentPattern]();
                this.currentPattern = (this.currentPattern + 1) % this.patterns.length;
            }
            
            startAnimation() {
                this.nextPattern();
                setInterval(() => {
                    this.nextPattern();
                }, 8000);
            }
        }
        
        window.addEventListener('load', () => {
            new FlipDotMatrix();
        });
    </script>
</body>
</html>
